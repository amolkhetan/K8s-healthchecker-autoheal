groups:
- name: pod-health
  rules:
  - alert: PodDown
    expr: kube_pod_status_phase{phase="Failed"} > 0
    for: 0m
    labels:
      severity: critical
    annotations:
      summary: "Pod {{ $labels.pod }} is down"
      description: "Pod {{ $labels.pod }} in namespace {{ $labels.namespace }} has entered Failed state."

  - alert: PodCrashLooping
    expr: increase(kube_pod_container_status_restarts_total[5m]) > 3
    for: 0s
    labels:
      severity: critical
    annotations:
      summary: "Pod {{ $labels.pod }} is crash looping"
      description: "Pod {{ $labels.pod }} has restarted more than 3 times in 5 minutes."

  - alert: PodNotReady
    expr: kube_pod_status_ready{condition="false"} > 0
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "Pod {{ $labels.pod }} is not ready"
      description: "Pod {{ $labels.pod }} in namespace {{ $labels.namespace }} is not in Ready state."
