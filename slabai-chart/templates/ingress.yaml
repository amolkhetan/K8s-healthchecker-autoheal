apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: slabai-ingress
  namespace: slabai
  annotations:
    # Basic annotations (customize as needed)
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "false"  # Set to true if using HTTPS
spec:
  rules:
  - http:
      paths:
      # Frontend - serve at root path
      - path: /
        pathType: Prefix
        backend:
          service:
            name: frontend
            port:
              number: 80
      
      # Userservice API routes
      - path: /api/users
        pathType: Prefix
        backend:
          service:
            name: userservice
            port:
              number: 3000
      
      - path: /api/auth
        pathType: Prefix
        backend:
          service:
            name: userservice
            port:
              number: 3000
      
      # Projectservice API routes
      - path: /api/projects
        pathType: Prefix
        backend:
          service:
            name: projectservice
            port:
              number: 3001
      
      # Paymentservice API routes
      - path: /api/payments
        pathType: Prefix
        backend:
          service:
            name: paymentservice
            port:
              number: 3002
      
      # Health check endpoints
      - path: /health
        pathType: Prefix
        backend:
          service:
            name: frontend  # or any service you want for health checks
            port:
              number: 80